!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e=typeof a;if("base64"===b&&"string"===e)for(a=C(a);a.length%4!==0;)a+="=";var f;if("number"===e)f=F(a);else if("string"===e)f=d.byteLength(a,b);else{if("object"!==e)throw new Error("First argument needs to be a number, array or string.");f=F(a.length)}var g;d._useTypedArrays?g=D(new Uint8Array(f)):(g=this,g.length=f,g._isBuffer=!0);var h;if(d._useTypedArrays&&"function"==typeof Uint8Array&&a instanceof Uint8Array)g._set(a);else if(H(a))for(h=0;f>h;h++)g[h]=d.isBuffer(a)?a.readUInt8(h):a[h];else if("string"===e)g.write(a,0,b);else if("number"===e&&!d._useTypedArrays&&!c)for(h=0;f>h;h++)g[h]=0;return g}function e(a,b,c,e){c=Number(c)||0;var f=a.length-c;e?(e=Number(e),e>f&&(e=f)):e=f;var g=b.length;S(g%2===0,"Invalid hex string"),e>g/2&&(e=g/2);for(var h=0;e>h;h++){var i=parseInt(b.substr(2*h,2),16);S(!isNaN(i),"Invalid hex string"),a[c+h]=i}return d._charsWritten=2*h,h}function f(a,b,c,e){var f=d._charsWritten=N(J(b),a,c,e);return f}function g(a,b,c,e){var f=d._charsWritten=N(K(b),a,c,e);return f}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,e){var f=d._charsWritten=N(M(b),a,c,e);return f}function j(a,b,c,e){var f=d._charsWritten=N(L(b),a,c,e);return f}function k(a,b,c){return T.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=O(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+O(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=I(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(S("boolean"==typeof c,"missing or invalid endian"),S(b+3<a.length,"Trying to read beyond buffer length")),U.read(a,b,c,23,4)}function v(a,b,c,d){return d||(S("boolean"==typeof c,"missing or invalid endian"),S(b+7<a.length,"Trying to read beyond buffer length")),U.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+1<a.length,"trying to write beyond buffer length"),P(b,65535));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function x(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"trying to write beyond buffer length"),P(b,4294967295));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255}function y(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+1<a.length,"Trying to write beyond buffer length"),Q(b,32767,-32768));var f=a.length;c>=f||(b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e))}function z(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"Trying to write beyond buffer length"),Q(b,2147483647,-2147483648));var f=a.length;c>=f||(b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e))}function A(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"Trying to write beyond buffer length"),R(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;c>=f||U.write(a,b,c,d,23,4)}function B(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+7<a.length,"Trying to write beyond buffer length"),R(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;c>=f||U.write(a,b,c,d,52,8)}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function D(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=V.get,a.set=V.set,a.write=V.write,a.toString=V.toString,a.toLocaleString=V.toString,a.toJSON=V.toJSON,a.copy=V.copy,a.slice=V.slice,a.readUInt8=V.readUInt8,a.readUInt16LE=V.readUInt16LE,a.readUInt16BE=V.readUInt16BE,a.readUInt32LE=V.readUInt32LE,a.readUInt32BE=V.readUInt32BE,a.readInt8=V.readInt8,a.readInt16LE=V.readInt16LE,a.readInt16BE=V.readInt16BE,a.readInt32LE=V.readInt32LE,a.readInt32BE=V.readInt32BE,a.readFloatLE=V.readFloatLE,a.readFloatBE=V.readFloatBE,a.readDoubleLE=V.readDoubleLE,a.readDoubleBE=V.readDoubleBE,a.writeUInt8=V.writeUInt8,a.writeUInt16LE=V.writeUInt16LE,a.writeUInt16BE=V.writeUInt16BE,a.writeUInt32LE=V.writeUInt32LE,a.writeUInt32BE=V.writeUInt32BE,a.writeInt8=V.writeInt8,a.writeInt16LE=V.writeInt16LE,a.writeInt16BE=V.writeInt16BE,a.writeInt32LE=V.writeInt32LE,a.writeInt32BE=V.writeInt32BE,a.writeFloatLE=V.writeFloatLE,a.writeFloatBE=V.writeFloatBE,a.writeDoubleLE=V.writeDoubleLE,a.writeDoubleBE=V.writeDoubleBE,a.fill=V.fill,a.inspect=V.inspect,a.toArrayBuffer=V.toArrayBuffer,a}function E(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function F(a){return a=~~Math.ceil(+a),0>a?0:a}function G(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function H(a){return G(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function I(a){return 16>a?"0"+a.toString(16):a.toString(16)}function J(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(a.charCodeAt(c));else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function K(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function L(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function M(a){return T.toByteArray(a)}function N(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function O(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function P(a,b){S("number"==typeof a,"cannot write a non-number as a number"),S(a>=0,"specified a negative value for writing an unsigned value"),S(b>=a,"value is larger than maximum value for type"),S(Math.floor(a)===a,"value has a fractional component")}function Q(a,b,c){S("number"==typeof a,"cannot write a non-number as a number"),S(b>=a,"value larger than maximum allowed value"),S(a>=c,"value smaller than minimum allowed value"),S(Math.floor(a)===a,"value has a fractional component")}function R(a,b,c){S("number"==typeof a,"cannot write a non-number as a number"),S(b>=a,"value larger than maximum allowed value"),S(a>=c,"value smaller than minimum allowed value")}function S(a,b){if(!a)throw new Error(b||"Failed assertion")}var T=a("base64-js"),U=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192,d._useTypedArrays=function(){if("function"!=typeof Uint8Array||"function"!=typeof ArrayBuffer)return!1;try{var a=new Uint8Array(0);return a.foo=function(){return 42},42===a.foo()&&"function"==typeof a.subarray}catch(b){return!1}}(),d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=J(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=M(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(S(G(a),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if("number"!=typeof b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0!==c?Number(c):c=d.length,c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.copy=function(a,b,c,d){var e=this;if(c||(c=0),d||0===d||(d=this.length),b||(b=0),d!==c&&0!==a.length&&0!==e.length){S(d>=c,"sourceEnd < sourceStart"),S(b>=0&&b<a.length,"targetStart out of bounds"),S(c>=0&&c<e.length,"sourceStart out of bounds"),S(d>=0&&d<=e.length,"sourceEnd out of bounds"),d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);for(var f=0;d-c>f;f++)a[f+b]=this[f+c]}},d.prototype.slice=function(a,b){var c=this.length;if(a=E(a,c,0),b=E(b,c,c),d._useTypedArrays)return D(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(S(void 0!==a&&null!==a,"missing offset"),S(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(S(void 0!==a&&null!==a,"missing offset"),S(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){c||(S(void 0!==a&&null!==a,"missing value"),S(void 0!==b&&null!==b,"missing offset"),S(b<this.length,"trying to write beyond buffer length"),P(a,255)),b>=this.length||(this[b]=a)},d.prototype.writeUInt16LE=function(a,b,c){w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){c||(S(void 0!==a&&null!==a,"missing value"),S(void 0!==b&&null!==b,"missing offset"),S(b<this.length,"Trying to write beyond buffer length"),Q(a,127,-128)),b>=this.length||(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c))},d.prototype.writeInt16LE=function(a,b,c){y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),S("number"==typeof a&&!isNaN(a),"value is not a number"),S(c>=b,"end < start"),c!==b&&0!==this.length){S(b>=0&&b<this.length,"start out of bounds"),S(c>=0&&c<=this.length,"end out of bounds");for(var d=b;c>d;d++)this[d]=a}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=I(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("function"==typeof Uint8Array){if(d._useTypedArrays)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var V=d.prototype},{"base64-js":2,ieee754:3}],2:[function(a,b){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function a(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function d(b){function c(a){j[l++]=a}var d,e,g,h,i,j;if(b.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=b.length;i="="===b.charAt(k-2)?2:"="===b.charAt(k-1)?1:0,j=new f(3*b.length/4-i),g=i>0?b.length-4:b.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=a(b.charAt(d))<<18|a(b.charAt(d+1))<<12|a(b.charAt(d+2))<<6|a(b.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=a(b.charAt(d))<<2|a(b.charAt(d+1))>>4,c(255&h)):1===i&&(h=a(b.charAt(d))<<10|a(b.charAt(d+1))<<4|a(b.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return c.charAt(a)}function d(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=d(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g=("0".charCodeAt(0),"+".charCodeAt(0)),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);b.exports.toByteArray=d,b.exports.fromByteArray=e}()},{}],3:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],4:[function(a,b){function c(a){this.peripheral=a}b.exports=c},{}],5:[function(a,b){(function(c){var d=a("./Connector"),e=function(a){d.call(this,a)};e.prototype=new d,e.prototype.constructor=e,e.prototype.services=function(a,b){var c=this;c.peripheral.discoverServices([],function(c,d){c?b(c):a(d)})},e.prototype.characteristics=function(a,b,c){a.discoverCharacteristics([],function(a,d){a?c(a):b(d)})},e.prototype.descriptors=function(a,b,c){a.discoverDescriptors(function(a,d){a?c(a):b(d)})},e.prototype.writeCharacteristic=function(a,b,d,e){var f=new c(b);a.write(f,!0,function(a){a?e(a):d()})},e.prototype.readCharacteristic=function(a,b,c){a.read(function(a,d){a?c(a):b(d)})},e.prototype.writeDescriptor=function(a,b,d,e){var f=new c(b);a.writeValue(f,function(a){a?e(a):d()})},e.prototype.enableNotification=function(a,b,c){a.on("read",b),a.notify(!0,function(a){a&&c(a)})},e.prototype.disableNotification=function(a,b,c){a.notify(!1,function(a){a?c(a):b()})},e.prototype.close=function(){var a=this;a.peripheral.disconnect()},e.prototype.toString=function(){return this.peripheral.uuid},b.exports=e}).call(this,a("buffer").Buffer)},{"./Connector":4,buffer:1}],6:[function(a,b){b.exports={GATT_CLIENT_CHAR_CFG_UUID:"00002902-0000-1000-8000-00805f9b34fb",ACCELEROMETER_UUID_SERVICE:"f000aa10-0451-4000-b000-000000000000",ACCELEROMETER_UUID_DATA:"f000aa11-0451-4000-b000-000000000000",ACCELEROMETER_UUID_CONF:"f000aa12-0451-4000-b000-000000000000",ACCELEROMETER_UUID_PERIOD:"f000aa13-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_SERVICE:"f000aa40-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_DATA:"f000aa41-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_CONF:"f000aa42-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_PERIOD:"f000aa44-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_CALIBRATION:"f000aa43-0451-4000-b000-000000000000",GYROSCOPE_UUID_SERVICE:"f000aa50-0451-4000-b000-000000000000",GYROSCOPE_UUID_DATA:"f000aa51-0451-4000-b000-000000000000",GYROSCOPE_UUID_CONF:"f000aa52-0451-4000-b000-000000000000",GYROSCOPE_UUID_PERIOD:"f000aa53-0451-4000-b000-000000000000",HUMIDITY_UUID_SERVICE:"f000aa20-0451-4000-b000-000000000000",HUMIDITY_UUID_DATA:"f000aa21-0451-4000-b000-000000000000",HUMIDITY_UUID_CONF:"f000aa22-0451-4000-b000-000000000000",HUMIDITY_UUID_PERIOD:"f000aa23-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_SERVICE:"f000aa00-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_DATA:"f000aa01-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_CONF:"f000aa02-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_PERIOD:"f000aa03-0451-4000-b000-000000000000",MAGNETOMETER_UUID_SERVICE:"f000aa30-0451-4000-b000-000000000000",MAGNETOMETER_UUID_DATA:"f000aa31-0451-4000-b000-000000000000",MAGNETOMETER_UUID_CONF:"f000aa32-0451-4000-b000-000000000000",MAGNETOMETER_UUID_PERIOD:"f000aa33-0451-4000-b000-000000000000",SIMPLEKEY_UUID_SERVICE:"0000ffe0-0000-1000-8000-00805f9b34fb",SIMPLEKEY_UUID_DATA:"0000ffe1-0000-1000-8000-00805f9b34fb",GUID_PATTERN:/([a-f0-9]{8})-?([a-f0-9]{4})-?([a-f0-9]{4})-?([a-f0-9]{4})-?([a-f0-9]{12})/g,GUID_REPLACEMENT:"$1-$2-$3-$4-$5"}},{}],7:[function(a,b){var c=a("./Constants.js"),d=function(a,b,c,d,e){this.identifier=a,this.sensorTag=b,this.UUID_DATA=c,this.UUID_CONF=d,this.UUID_PERIOD=e,this.enabled=!1,this.characteristics={config:null,period:null,data:null},this.descriptors={notification:null},this._listeners=[]};d.prototype.init=function(a){for(var b in a.characteristics){var d=a.characteristics[b],e=d.uuid.replace(c.GUID_PATTERN,c.GUID_REPLACEMENT);switch(e){case this.UUID_CONF:this.characteristics.config=d;break;case this.UUID_PERIOD:this.characteristics.period=d;break;case this.UUID_DATA:this.characteristics.data=d;for(var f in d.descriptors){var g=d.descriptors[f],h=g.uuid.replace(c.GUID_PATTERN,c.GUID_REPLACEMENT);(h==c.GATT_CLIENT_CHAR_CFG_UUID||2902==h)&&(this.descriptors.notification=g)}}}this.log("Initialized")},d.prototype.log=function(a){this.sensorTag.log(this.identifier+": "+a)},d.prototype.enable=function(a){var b=1,c=this;c.sensorTag.device.writeCharacteristic(c.characteristics.config,new Uint8Array([a||b]),function(){c.enabled=!0,c.log("Enabled")},function(a){c.log("enable error: "+a)})},d.prototype.disable=function(){var a=0,b=this;b.sensorTag.device.writeCharacteristic(b.characteristics.config,new Uint8Array([a]),function(){b.enabled=!0,b.log("Disabled")},function(a){b.log("disable error: "+a)})},d.prototype.enableNotification=function(){var a=[1,0],b=this;b.sensorTag.device.writeDescriptor(b.descriptors.notification,new Uint8Array(a),function(){b.log("Notifications enabled")},function(a){b.log("enableNotifications write error: "+a)}),b.sensorTag.device.enableNotification(b.characteristics.data,function(){b.onDataNotify.apply(b,arguments)},function(a){b.log("enableNotifications subscribe error: "+a)})},d.prototype.disableNotification=function(){var a=[0,0],b=this;b.sensorTag.device.writeDescriptor(b.descriptors.notification,new Uint8Array(a),function(){b.log("Notifications disabled")},function(a){b.log("disableNotification write error: "+a)}),b.sensorTag.device.disableNotification(b.characteristics.data,function(){},function(a){b.log("disableNotification subscribe error: "+a)})},d.prototype.addListener=function(a){return this._listeners.push(a),this._listeners.length-1},d.prototype.removeListener=function(a){this._listeners.splice(a,1)},d.prototype.onDataNotify=function(){for(var a in this._listeners){var b=this._listeners[a];b.apply(this,arguments)}},b.exports=d},{"./Constants.js":6}],8:[function(a,b){function c(){++h}function d(){--h}var e=a("./Constants"),f=a("./Connectors/Connector"),g=function(a){if(!(a instanceof f))throw"Invalid device connector";this.device=a,this.services=[],this.Accelerometer=new g.Accelerometer(this),this.BarometricPressure=new g.BarometricPressure(this),this.Gyroscope=new g.Gyroscope(this),this.Humidity=new g.Humidity(this),this.IRTemperature=new g.IRTemperature(this),this.Magnetometer=new g.Magnetometer(this),this.SimpleKey=new g.SimpleKey(this)};g.Accelerometer=a("./Sensors/Accelerometer"),g.BarometricPressure=a("./Sensors/BarometricPressure"),g.Gyroscope=a("./Sensors/Gyroscope"),g.Humidity=a("./Sensors/Humidity"),g.IRTemperature=a("./Sensors/Humidity"),g.Magnetometer=a("./Sensors/Magnetometer"),g.SimpleKey=a("./Sensors/SimpleKey"),g.NobleConnector=a("./Connectors/NobleConnector"),g.prototype.log=function(a){console.log("SensorTag #"+this.device+" "+a)},g.prototype.init=function(){for(var a=this,b=0;b<a.services.length;++b){var c=a.services[b],d=c.uuid.replace(e.GUID_PATTERN,e.GUID_REPLACEMENT);switch(d){case e.ACCELEROMETER_UUID_SERVICE:a.Accelerometer.init(c);break;case e.BAROMETRICPRESSURE_UUID_SERVICE:a.BarometricPressure.init(c);break;case e.GYROSCOPE_UUID_SERVICE:a.Gyroscope.init(c);break;case e.HUMIDITY_UUID_SERVICE:a.Humidity.init(c);break;case e.IRTEMPERATURE_UUID_SERVICE:a.IRTemperature.init(c);break;case e.MAGNETOMETER_UUID_SERVICE:a.Magnetometer.init(c);break;case e.SIMPLEKEY_UUID_SERVICE:a.SimpleKey.init(c)}}a.log("Initialized")};var h=0;g.prototype.discover=function(a,b){var e=this;e.log("Discovering Services"),c(),e.device.services(function(c){d(),e.services=c;for(var f=0;f<c.length;++f){var g=c[f];e.discoverCharacteristics(g,a,b)}0===h&&(e.init(),void 0!==a&&a.call(e))},function(a){d(),e.log("Services error: "+a),void 0!==b&&b.call(e,a)})},g.prototype.discoverCharacteristics=function(a,b,e){var f=this;c(),f.device.characteristics(a,function(c){d(),a.characteristics=c;for(var g=0;g<c.length;++g){var i=c[g];f.discoverDescriptors(i,b,e)}0===h&&(f.init(),void 0!==b&&b.call(f))},function(a){d(),f.log("Characteristics error: "+a),void 0!==e&&e.call(f,a)})},g.prototype.discoverDescriptors=function(a,b,e){var f=this;c(),f.device.descriptors(a,function(c){d(),a.descriptors=c,0===h&&(f.init(),void 0!==b&&b.call(f))},function(a){d(),f.log("Descriptors error: "+a),void 0!==e&&e.call(f,a)})},g.prototype.close=function(){this.device.close()},b.exports=g},{"./Connectors/Connector":4,"./Connectors/NobleConnector":5,"./Constants":6,"./Sensors/Accelerometer":9,"./Sensors/BarometricPressure":10,"./Sensors/Gyroscope":11,"./Sensors/Humidity":12,"./Sensors/Magnetometer":13,"./Sensors/SimpleKey":14}],9:[function(a,b){function c(a,b){var c=1/64,d=b||1,e=a*d*c;return Math.round(100*e)/100}var d=a("../Constants"),e=a("../SensorBase"),f=function(a){e.call(this,"Accelerometer",a,d.ACCELEROMETER_UUID_DATA,d.ACCELEROMETER_UUID_CONF,d.ACCELEROMETER_UUID_PERIOD)};f.prototype=new e,f.prototype.constructor=f,f.prototype.setPeriod=function(a){var b=Math.round(a/10),c=this;c.sensorTag.device.writeCharacteristic(c.characteristics.period,new Uint8Array([b]),function(){c.log("Period set to "+a+"ms")},function(a){c.log("setPeriod error: "+a)})},f.prototype.calculateAcceleration=function(a,b){var d=new Int8Array(a);return{x:c(d[0],b),y:c(d[1],b),z:c(d[2],b)}},b.exports=f},{"../Constants":6,"../SensorBase":7}],10:[function(a,b){var c=a("../Constants"),d=a("../SensorBase"),e=function(a){d.call(this,"BarometricPressure",a,c.BAROMETRICPRESSURE_UUID_DATA,c.BAROMETRICPRESSURE_UUID_CONF,c.BAROMETRICPRESSURE_UUID_PERIOD),this.calibration=[0,0,0,0,0,0,0,0],this.characteristics.calibration=null};e.prototype=new d,e.prototype.constructor=e,e.prototype.init=function(a){for(var b in a.characteristics){var e=a.characteristics[b],f=e.uuid.replace(c.GUID_PATTERN,c.GUID_REPLACEMENT);switch(f){case c.BAROMETRICPRESSURE_UUID_CALIBRATION:this.characteristics.calibration=e}}d.prototype.init.call(this,a)},e.prototype.readCalibration=function(a,b){var c,d=this,e=2;c=function(a,c){d.log(a+" error: "+c),void 0!==b&&b.call(d,c)},d.sensorTag.device.writeCharacteristic(d.characteristics.config,new Uint8Array([e]),function(){d.sensorTag.device.readCharacteristic(d.characteristics.calibration,function(b){d.calibration=new Uint16Array(b),void 0!==a&&a.call(d,d.calibration)},function(a){c("readCalibration read",a)})},function(a){c("readCalibration write",a)})},e.prototype.enable=function(){this.readCalibration(d.prototype.enable)},e.prototype.calculatePressure=function(a){var b=new Int16Array(a),c=b[0],d=b[1],e=(100*(this.calibration[0]*c/Math.Pow(2,8)+this.calibration[1]*Math.Pow(2,6))/Math.Pow(2,16),this.calibration[2]+this.calibration[3]*c/Math.Pow(2,17)+this.calibration[4]*c/Math.Pow(2,15)*c/Math.Pow(2,19)),f=this.calibration[5]*Math.Pow(2,14)+this.calibration[6]*c/Math.Pow(2,3)+this.calibration[7]*c/Math.Pow(2,15)*c/Math.Pow(2,4);return(e*d+f)/Math.Pow(2,14)},b.exports=e},{"../Constants":6,"../SensorBase":7}],11:[function(a,b){function c(a){var b=a*(500/65536);return Math.round(100*b)/100}var d=a("../Constants"),e=a("../SensorBase"),f=function(a){e.call(this,"Gyroscope",a,d.GYROSCOPE_UUID_DATA,d.GYROSCOPE_UUID_CONF,d.GYROSCOPE_UUID_PERIOD),this.Axis=f.Axis.XYZ};f.Axis={X:1,Y:2,XY:3,Z:4,XZ:5,YZ:6,XYZ:7},f.prototype=new e,f.prototype.constructor=f,f.prototype.enable=function(){e.prototype.enable.call(this,this.Axis)},f.prototype.calculateAxisValue=function(a){var b=new Int16Array(a);return{y:c(b[0]),x:c(b[1]),z:c(b[2])}},b.exports=f},{"../Constants":6,"../SensorBase":7}],12:[function(a,b){var c=a("../Constants"),d=a("../SensorBase"),e=function(a){d.call(this,"Humidity",a,c.HUMIDITY_UUID_DATA,c.HUMIDITY_UUID_CONF,c.HUMIDITY_UUID_PERIOD)};e.prototype=new d,e.prototype.constructor=e,e.prototype.calculateHumidity=function(a){var b,c=new Uint16Array(a);return b=c[1]-c[1]%4,-6+125*(b/65535)},b.exports=e},{"../Constants":6,"../SensorBase":7}],13:[function(a,b){function c(a){return a*(2e3/65336)}var d=a("../Constants"),e=a("../SensorBase"),f=a("./Accelerometer"),g=function(a){e.call(this,"Magnetometer",a,d.MAGNETOMETER_UUID_DATA,d.MAGNETOMETER_UUID_CONF,d.MAGNETOMETER_UUID_PERIOD)};g.prototype=new e,g.prototype.constructor=g,g.prototype.setPeriod=f.prototype.setPeriod,g.prototype.calculateCoordinates=function(a){var b=new Int16Array(a);return{x:c(b[0]),y:c(b[1]),z:c(b[2])}},b.exports=g},{"../Constants":6,"../SensorBase":7,"./Accelerometer":9}],14:[function(a,b){var c=a("../Constants"),d=a("../SensorBase"),e=function(){d.call(this,"SimpleKey",c.SIMPLEKEY_UUID_DATA)};e.Keys={RIGHT:1,LEFT:2,CENTER:4},e.prototype=new d,e.prototype.constructor=e,delete e.prototype.enable,delete e.prototype.disable,b.exports=e},{"../Constants":6,"../SensorBase":7}]},{},[8]);