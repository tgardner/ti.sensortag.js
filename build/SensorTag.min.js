!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={GATT_CLIENT_CHAR_CFG_UUID:"00002902-0000-1000-8000-00805f9b34fb",ACCELEROMETER_UUID_SERVICE:"f000aa10-0451-4000-b000-000000000000",ACCELEROMETER_UUID_DATA:"f000aa11-0451-4000-b000-000000000000",ACCELEROMETER_UUID_CONF:"f000aa12-0451-4000-b000-000000000000",ACCELEROMETER_UUID_PERIOD:"f000aa13-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_SERVICE:"f000aa40-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_DATA:"f000aa41-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_CONF:"f000aa42-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_PERIOD:"f000aa44-0451-4000-b000-000000000000",BAROMETRICPRESSURE_UUID_CALIBRATION:"f000aa43-0451-4000-b000-000000000000",GYROSCOPE_UUID_SERVICE:"f000aa50-0451-4000-b000-000000000000",GYROSCOPE_UUID_DATA:"f000aa51-0451-4000-b000-000000000000",GYROSCOPE_UUID_CONF:"f000aa52-0451-4000-b000-000000000000",GYROSCOPE_UUID_PERIOD:"f000aa53-0451-4000-b000-000000000000",HUMIDITY_UUID_SERVICE:"f000aa20-0451-4000-b000-000000000000",HUMIDITY_UUID_DATA:"f000aa21-0451-4000-b000-000000000000",HUMIDITY_UUID_CONF:"f000aa22-0451-4000-b000-000000000000",HUMIDITY_UUID_PERIOD:"f000aa23-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_SERVICE:"f000aa00-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_DATA:"f000aa01-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_CONF:"f000aa02-0451-4000-b000-000000000000",IRTEMPERATURE_UUID_PERIOD:"f000aa03-0451-4000-b000-000000000000",MAGNETOMETER_UUID_SERVICE:"f000aa30-0451-4000-b000-000000000000",MAGNETOMETER_UUID_DATA:"f000aa31-0451-4000-b000-000000000000",MAGNETOMETER_UUID_CONF:"f000aa32-0451-4000-b000-000000000000",MAGNETOMETER_UUID_PERIOD:"f000aa33-0451-4000-b000-000000000000",SIMPLEKEY_UUID_SERVICE:"0000ffe0-0000-1000-8000-00805f9b34fb",SIMPLEKEY_UUID_DATA:"0000ffe1-0000-1000-8000-00805f9b34fb"}},{}],2:[function(a,b){var c=function(a,b,c,d,e){this.identifier=a,this.sensorTag=b,this.UUID_DATA=c,this.UUID_CONF=d,this.UUID_PERIOD=e,this.enabled=!1,this._handles={config:null,period:null,data:null,notification:null},this._listeners=[]};c.prototype.init=function(a){for(var b in a.characteristics){var c=a.characteristics[b];switch(c.uuid){case this.UUID_CONF:this._handles.config=c.handle;break;case this.UUID_PERIOD:this._handles.period=c.handle;break;case this.UUID_DATA:this._handles.data=c.handle;for(var d in c.descriptors){var e=c.descriptors[d];e.uuid==GATT_CLIENT_CHAR_CFG_UUID&&(this._handles.notification=e.handle)}}}},c.prototype.log=function(a){this.sensorTag.log(this.identifier+": "+a)},c.prototype.enable=function(a){var b=1,c=this;evothings.ble.writeCharacteristic(c.sensorTag.device,c._handles.config,new Uint8Array([a||b]),function(){c.enabled=!0},function(a){c.log("enable error: "+a)})},c.prototype.disable=function(){var a=0,b=this;evothings.ble.writeCharacteristic(b.sensorTag.device,b._handles.config,new Uint8Array([a]),function(){b.enabled=!1},function(a){b.log("disable error: "+a)})},c.prototype.enableNotifications=function(){var a=[1,0],b=this;evothings.ble.writeDescriptor(b.sensorTag.device,b._handles.notification,new Uint8Array(a),function(){b.log("Notifications enabled")},function(a){b.log("enableNotifications write error: "+a)}),evothings.ble.enableNotification(b.sensorTag.device,b._handles.data,function(){b.onDataNotify.apply(b,arguments)},function(a){b.log("enableNotifications subscribe error: "+a)})},c.prototype.disableNotification=function(){var a=[0,0],b=this;evothings.ble.writeDescriptor(b.sensorTag.device,b._handles.notification,new Uint8Array(a),function(){b.log("Notifications disabled")},function(a){b.log("disableNotification write error: "+a)}),evothings.ble.disableNotification(b.sensorTag.device,b._handles.data,function(){},function(a){b.log("disableNotification unsubscribe error: "+a)})},c.prototype.addListener=function(a){return this._listeners.push(a),this._listeners.length-1},c.prototype.removeListener=function(a){this._listeners.splice(a,1)},c.prototype.onDataNotify=function(){for(var a in this._listeners){var b=this._listeners[a];b.apply(this,arguments)}},b.exports=c},{}],3:[function(a,b){function c(){++g}function d(){--g}var e=a("./Constants.js"),f=function(a){this.device=a,this.services=[],this.Accelerometer=new f.Accelerometer(this),this.BarometricPressure=new f.BarometricPressure(this),this.Gyroscope=new f.Gyroscope(this),this.Humidity=new f.Humidity(this),this.IRTemperature=new f.IRTemperature(this),this.Magnetometer=new f.Magnetometer(this),this.SimpleKey=new f.SimpleKey(this)};f.Accelerometer=a("./Sensors/Accelerometer.js"),f.BarometricPressure=a("./Sensors/BarometricPressure.js"),f.Gyroscope=a("./Sensors/Gyroscope.js"),f.Humidity=a("./Sensors/Humidity.js"),f.IRTemperature=a("./Sensors/Humidity.js"),f.Magnetometer=a("./Sensors/Humidity.js"),f.SimplyKey=a("./Sensors/SimpleKey"),f.prototype.log=function(a){console.log("SensorTag #"+this.device+" "+a)},f.prototype.init=function(){for(var a=this,b=0;b<a.services.length;++b){var c=a.services[b];switch(c.uuid){case e.ACCELEROMETER_UUID_SERVICE:a.Accelerometer.init(c);break;case e.BAROMETRICPRESSURE_UUID_SERVICE:a.BarometricPressure.init(c);break;case e.GYROSCOPE_UUID_SERVICE:a.Gyroscope.init(c);break;case e.HUMIDITY_UUID_SERVICE:a.Humidity.init(c);break;case e.IRTEMPERATURE_UUID_SERVICE:a.IRTemperature.init(c);break;case e.MAGNETOMETER_UUID_SERVICE:a.Magnetometer.init(c);break;case e.SIMPLEKEY_UUID_SERVICE:a.SimpleKey.init(c)}}a.log("Initialized")};var g=0;f.prototype.discover=function(a,b){var e=this;e.log("Discovering Services"),c(),evothings.ble.services(e.device,function(c){d(),e.services=c;for(var f=0;f<c.length;++f){var h=c[f];e.discoverCharacteristics(h,a,b)}0===g&&(e.init(),void 0!==a&&a.call(e))},function(a){d(),e.log("Services error: "+a),void 0!==b&&b.call(e,a)})},f.prototype.discoverCharacteristics=function(a,b,e){var f=this;c(),evothings.ble.characteristics(f.device,a.handle,function(c){d(),a.characteristics=c;for(var h=0;h<c.length;++h){var i=c[h];f.discoverDescriptors(i,b,e)}0===g&&(f.init(),void 0!==b&&b.call(f))},function(a){d(),f.log("Characteristics error: "+a),void 0!==e&&e.call(f,a)})},f.prototype.discoverDescriptors=function(a,b,e){var f=this;c(),evothings.ble.descriptors(f.device,a.handle,function(c){d(),a.descriptors=c,0===g&&(f.init(),void 0!==b&&b.call(f))},function(a){d(),f.log("Descriptors error: "+a),void 0!==e&&e.call(f,a)})},f.prototype.close=function(){evothings.ble.close(this.device)},console.log(f),b.exports=f},{"./Constants.js":1,"./Sensors/Accelerometer.js":4,"./Sensors/BarometricPressure.js":5,"./Sensors/Gyroscope.js":6,"./Sensors/Humidity.js":7,"./Sensors/SimpleKey":8}],4:[function(a,b){function c(a,b){var c=1/64,d=b||1,e=a*d*c;return Math.round(100*e)/100}var d=a("../Constants.js"),e=a("../SensorBase.js"),f=function(a){e.call(this,"Accelerometer",a,d.ACCELEROMETER_UUID_DATA,d.ACCELEROMETER_UUID_CONF,d.ACCELEROMETER_UUID_PERIOD)};f.prototype=new e,f.prototype.constructor=f,f.prototype.setPeriod=function(a){var b=Math.round(a/10),c=this;evothings.ble.writeCharacteristic(c.sensorTag.device,c._handles.period,new Uint8Array([b]),function(){c.log("Period set to "+a+"ms")},function(a){c.log("setPeriod error: "+a)})},f.prototype.calculateAcceleration=function(a,b){var d=new Int8Array(a);return{x:c(d[0],b),y:c(d[1],b),z:c(d[2],b)}},b.exports=f},{"../Constants.js":1,"../SensorBase.js":2}],5:[function(a,b){var c=a("../Constants.js"),d=a("../SensorBase.js"),e=function(a){d.call(this,"BarometricPressure",a,BAROMETRICPRESSURE_UUID_DATA,BAROMETRICPRESSURE_UUID_CONF,BAROMETRICPRESSURE_UUID_PERIOD),this.calibration=[0,0,0,0,0,0,0,0],this._handles.calibration=null};e.prototype=new d,e.prototype.constructor=e,e.prototype.init=function(a){for(var b in a.characteristics){var e=a.characteristics[b];switch(e.uuid){case c.BAROMETRICPRESSURE_UUID_CALIBRATION:this._handles.calibration=e.uuid}}d.prototype.init.call(this,a)},e.prototype.readCalibration=function(a,b){var c,d=this,e=2;c=function(a,c){d.log(a+" error: "+c),void 0!==b&&b.call(d,c)},evothings.ble.writeCharacteristic(d.sensorTag.device,d._handles.config,new Uint8Array([e]),function(){evothings.ble.readCharacteristic(d.sensorTag.device,d._handles.calibration,function(b){d.calibration=new Uint16Array(b),void 0!==a&&a.call(d,d.calibration)},function(a){c("readCalibration read",a)})},function(a){c("readCalibration write",a)})},e.prototype.enable=function(){this.readCalibration(d.prototype.enable)},e.prototype.calculatePressure=function(a){var b=new Int16Array(a),c=b[0],d=b[1],e=(100*(this.calibration[0]*c/Math.Pow(2,8)+this.calibration[1]*Math.Pow(2,6))/Math.Pow(2,16),this.calibration[2]+this.calibration[3]*c/Math.Pow(2,17)+this.calibration[4]*c/Math.Pow(2,15)*c/Math.Pow(2,19)),f=this.calibration[5]*Math.Pow(2,14)+this.calibration[6]*c/Math.Pow(2,3)+this.calibration[7]*c/Math.Pow(2,15)*c/Math.Pow(2,4);return(e*d+f)/Math.Pow(2,14)},b.exports=e},{"../Constants.js":1,"../SensorBase.js":2}],6:[function(a,b){function c(a){var b=a*(500/65536);return Math.round(100*b)/100}var d=(a("../Constants.js"),a("../SensorBase.js")),e=function(a){d.call(this,"Gyroscope",a,GYROSCOPE_UUID_DATA,GYROSCOPE_UUID_CONF,GYROSCOPE_UUID_PERIOD),this.Axis=e.Axis.XYZ};e.Axis={X:1,Y:2,XY:3,Z:4,XZ:5,YZ:6,XYZ:7},e.prototype=new d,e.prototype.constructor=e,e.prototype.enable=function(){d.prototype.enable.call(this,this.Axis)},e.prototype.calculateAxisValue=function(a){var b=new Int16Array(a);return{y:c(b[0]),x:c(b[1]),z:c(b[2])}},b.exports=e},{"../Constants.js":1,"../SensorBase.js":2}],7:[function(a,b){var c=(a("../Constants.js"),a("../SensorBase.js")),d=function(a){c.call(this,"Humidity",a,HUMIDITY_UUID_DATA,HUMIDITY_UUID_CONF,HUMIDITY_UUID_PERIOD)};d.prototype=new c,d.prototype.constructor=d,d.prototype.calculateHumidity=function(a){var b,c=new Uint16Array(a);return b=c[1]-c[1]%4,-6+125*(b/65535)},b.exports=d},{"../Constants.js":1,"../SensorBase.js":2}],8:[function(a,b){var c=a("../Constants.js"),d=a("../SensorBase.js"),e=function(){d.call(this,"SimpleKey",c.SIMPLEKEY_UUID_DATA)};e.Keys={RIGHT:1,LEFT:2,CENTER:4},e.prototype=new d,e.prototype.constructor=e,delete e.prototype.enable,delete e.prototype.disable,b.exports=e},{"../Constants.js":1,"../SensorBase.js":2}]},{},[3]);